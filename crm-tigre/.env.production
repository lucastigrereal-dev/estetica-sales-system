# ================================
# CRM TIGRE - VARIÁVEIS DE PRODUÇÃO
# ================================
# ⚠️  IMPORTANTE: NUNCA commite este arquivo no Git!
# ⚠️  Mantenha estas credenciais SEGURAS e SECRETAS!

# ===== DATABASE =====
POSTGRES_USER=crm_tigre_prod
POSTGRES_PASSWORD=GERAR_SENHA_FORTE_AQUI_MIN_32_CHARS
POSTGRES_DB=crm_tigre_production
POSTGRES_PORT=5432
DATABASE_URL=postgresql://crm_tigre_prod:GERAR_SENHA_FORTE_AQUI_MIN_32_CHARS@postgres:5432/crm_tigre_production?schema=public

# ===== REDIS =====
REDIS_PASSWORD=GERAR_SENHA_REDIS_FORTE_AQUI
REDIS_PORT=6379
REDIS_URL=redis://:GERAR_SENHA_REDIS_FORTE_AQUI@redis:6379

# ===== AUTH & SECURITY =====
# Gerar com: openssl rand -base64 48
JWT_SECRET=GERAR_JWT_SECRET_FORTE_AQUI_MIN_48_CHARS
JWT_EXPIRES_IN=7d

# Para Next.js (se usar)
NEXTAUTH_SECRET=GERAR_NEXTAUTH_SECRET_AQUI
NEXTAUTH_URL=https://crm.suaclinica.com

# ===== OPENAI (Anna Chatbot) =====
OPENAI_API_KEY=sk-proj-SEU_KEY_REAL_AQUI
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
ANNA_THRESHOLD_QUALIFICADO=70

# ===== WHATSAPP BUSINESS API =====
# Opção 1: Twilio
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=sua_auth_token_real
TWILIO_WHATSAPP_NUMBER=+14155238886

# Opção 2: Meta Cloud API (recomendado)
META_WHATSAPP_TOKEN=seu_token_meta_cloud_api
META_WHATSAPP_PHONE_ID=seu_phone_id
META_VERIFY_TOKEN=gerar_token_verificacao_aleatorio
META_WEBHOOK_URL=https://api.crm.suaclinica.com/webhook/fb

# ===== GOOGLE CALENDAR =====
GOOGLE_CLIENT_ID=seu_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=seu_client_secret
GOOGLE_REDIRECT_URI=https://api.crm.suaclinica.com/auth/google/callback

# ===== STRIPE (Pagamentos) =====
# ⚠️  Usar chaves LIVE em produção (não test!)
STRIPE_SECRET_KEY=sk_live_SEU_KEY_LIVE_AQUI
STRIPE_PUBLISHABLE_KEY=pk_live_SEU_KEY_LIVE_AQUI
STRIPE_WEBHOOK_SECRET=whsec_SEU_WEBHOOK_SECRET

# ===== SENDGRID (Email) =====
SENDGRID_API_KEY=SG.SEU_API_KEY_REAL
SENDGRID_FROM_EMAIL=noreply@suaclinica.com
SENDGRID_FROM_NAME=Sua Clínica de Estética

# ===== AWS S3 (Storage) =====
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY=sua_secret_key_aws
AWS_REGION=sa-east-1
AWS_S3_BUCKET=crm-tigre-uploads-production

# ===== SENTRY (Monitoramento de Erros) =====
SENTRY_DSN=https://xxxxxxx@oxxxx.ingest.sentry.io/xxxxxxx
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ===== APP CONFIG =====
NODE_ENV=production
PORT=4000
BACKEND_PORT=4000
FRONTEND_PORT=3000

# URLs Públicas
FRONTEND_URL=https://crm.suaclinica.com
BACKEND_URL=https://api.crm.suaclinica.com

# ===== CLÍNICA (Configurações) =====
CLINICA_NOME=Sua Clínica de Estética
CLINICA_TELEFONE=+5511999999999
CLINICA_EMAIL=contato@suaclinica.com
CLINICA_ENDERECO=Rua Exemplo, 123 - São Paulo/SP
CLINICA_CNPJ=00.000.000/0001-00

# Horários
CLINICA_HORARIO_INICIO=09:00
CLINICA_HORARIO_FIM=18:00
CLINICA_DIAS_FUNCIONAMENTO=1,2,3,4,5,6  # 0=Dom, 1=Seg, ..., 6=Sab
CLINICA_INTERVALO_CONSULTA=30  # minutos

# ===== AUTOMAÇÕES =====
# Lembretes
LEMBRETE_24H_ENABLED=true
LEMBRETE_24H_HORA=10:00
LEMBRETE_2H_ENABLED=true
LEMBRETE_CONFIRMACAO_ENABLED=true

# NPS
NPS_ENVIAR_APOS_HORAS=24
NPS_ENABLED=true

# Follow-up
FOLLOWUP_ENABLED=true
FOLLOWUP_DIAS_SEM_RESPOSTA=3
FOLLOWUP_MAX_TENTATIVAS=3

# ===== FIDELIDADE =====
PONTOS_POR_REAL=1
PONTOS_RESGATE_MINIMO=100
NIVEL_PRATA_PONTOS=500
NIVEL_OURO_PONTOS=1500
NIVEL_PLATINA_PONTOS=5000

# Recompensas
DESCONTO_PRATA_PERCENTUAL=5
DESCONTO_OURO_PERCENTUAL=10
DESCONTO_PLATINA_PERCENTUAL=15

# ===== RATE LIMITING =====
RATE_LIMIT_WINDOW_MS=900000  # 15 minutos
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_LOGIN_MAX=5  # tentativas de login

# ===== LOGS =====
LOG_LEVEL=info  # debug, info, warn, error
LOG_FORMAT=json  # json ou text
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/app/logs/crm-tigre.log

# ===== BACKUP =====
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Todo dia às 2h AM
BACKUP_RETENTION_DAYS=7

# ===== FEATURE FLAGS =====
FEATURE_ANNA_ENABLED=true
FEATURE_GOOGLE_CALENDAR_ENABLED=true
FEATURE_WHATSAPP_ENABLED=true
FEATURE_PAGAMENTOS_ENABLED=true
FEATURE_PROGRAMA_FIDELIDADE_ENABLED=true
FEATURE_NPS_ENABLED=true

# ===== MÉTRICAS E ANALYTICS =====
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
FACEBOOK_PIXEL_ID=XXXXXXXXXX

# ===== CERTIFICADOS SSL =====
# Deixar vazio se usar Let's Encrypt automático
SSL_CERT_PATH=/etc/nginx/ssl/fullchain.pem
SSL_KEY_PATH=/etc/nginx/ssl/privkey.pem

# ===== TIMEZONE =====
TZ=America/Sao_Paulo

# ================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# ================================
#
# 1. JWT_SECRET: gerar com: openssl rand -base64 48
# 2. Senhas do banco: usar gerenciador de senhas ou: openssl rand -base64 32
# 3. Stripe: usar chaves LIVE (não test!) em produção
# 4. Sentry: criar projeto em sentry.io
# 5. AWS S3: criar bucket e IAM user com permissões S3
# 6. SendGrid: verificar domínio e configurar SPF/DKIM
# 7. Let's Encrypt: certificados gerados automaticamente no primeiro deploy
# 8. Domínios: apontar DNS:
#    - crm.suaclinica.com -> IP do servidor
#    - api.crm.suaclinica.com -> mesmo IP
#
# ================================
# CHECKLIST ANTES DO DEPLOY
# ================================
# [ ] Todas as senhas foram alteradas dos valores padrão
# [ ] JWT_SECRET foi gerado com comando openssl
# [ ] Stripe usa chaves LIVE (não test)
# [ ] Domínios DNS apontam para o servidor
# [ ] Bucket S3 criado e IAM configurado
# [ ] SendGrid domínio verificado
# [ ] Sentry projeto criado
# [ ] Backup automático configurado no crontab
# [ ] Firewall configurado (portas 80, 443, 22)
# [ ] SSH com key-based auth (não senha)
# [ ] Fail2ban instalado e configurado
# [ ] Monitoramento configurado (UptimeRobot, etc)
#
